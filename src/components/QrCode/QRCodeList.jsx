import React, {useState, useEffect, useMemo} from "react";import {QrCodeItem} from "./QrCodeItem";import styles from './QrCode.module.scss';import bwipjs from "bwip-js";import {colorRegExp, nameRegExp, sizeRegExp} from "../../helpers/regexp.helper";export const QRCodeList = ({stickerData, barcode, date}) => {    const [currentPage, setCurrentPage] = useState(1);    const [itemsPerPage] = useState(150);    const indexOfLastItem = currentPage * itemsPerPage;    const indexOfFirstItem = indexOfLastItem - itemsPerPage;    const currentItems = stickerData.slice(indexOfFirstItem, indexOfLastItem);    const totalPages = Math.ceil(stickerData.length / itemsPerPage);    useEffect(() => {        setCurrentPage(1);    }, [stickerData]);    const qrCodes = useMemo(() => {        return currentItems.map((item) => {            const text = item.qrCode            try {                const canvas = document.createElement('canvas');                bwipjs.toCanvas(canvas, {                    bcid: 'datamatrix',                    text: text,                    scale: 0,                    includetext: true,                    textxalign: 'center',                });                return {                    name: item.productInfo.match(nameRegExp)[1],                    size: item.productInfo.match(sizeRegExp)[0],                    color: item.productInfo.match(colorRegExp)[1],                    canvas: canvas.toDataURL(),                    gtin: text.slice(2, 19),                    sn: text.substring(text.indexOf("215") + 3, text.indexOf(""))                };            } catch (error) {                console.error("Error generating QR code:", error);                return null;            }        });    }, [currentItems]);    const handlePagination = (pageNumber) => {        setCurrentPage(pageNumber);    };    return (        <div>            <div className={styles.flex}>                {!!qrCodes.length && qrCodes.map((qrCodeData, index) => (                    <QrCodeItem                        key={index}                        index={index}                        qrCodeData={qrCodeData}                        barcode={barcode}                        date={date}                    />                ))}            </div>            <div className={styles.pagination}>                {Array.from({length: totalPages}, (_, i) => (                    <button                        key={i}                        onClick={() => handlePagination(i + 1)}                        className={`${styles.btn} ${currentPage === i + 1 ? styles.active : ''}`}                    >                        {i + 1}                    </button>                ))}            </div>        </div>    );};